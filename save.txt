package com.specialCharactersActualText;

import com.itextpdf.commons.utils.FileUtil;
import com.itextpdf.io.font.PdfEncodings;
import com.itextpdf.kernel.font.PdfFont;
import com.itextpdf.kernel.font.PdfFontFactory;
import com.itextpdf.kernel.font.PdfFontFactory.EmbeddingStrategy;
import com.itextpdf.kernel.pdf.PdfUAConformance;
import com.itextpdf.kernel.pdf.PdfWriter;
import com.itextpdf.kernel.pdf.WriterProperties;
import com.itextpdf.kernel.pdf.canvas.PdfCanvas;
import com.itextpdf.kernel.pdf.canvas.CanvasTag;
import com.itextpdf.kernel.pdf.PdfName;
import com.itextpdf.kernel.pdf.PdfString;
import com.itextpdf.kernel.pdf.tagging.StandardRoles;
import com.itextpdf.kernel.pdf.tagutils.TagTreePointer;
import com.itextpdf.layout.Document;
import com.itextpdf.layout.element.Paragraph;
import com.itextpdf.layout.element.Text;
import com.itextpdf.pdfua.PdfUAConfig;
import com.itextpdf.pdfua.PdfUADocument;

import java.io.FileOutputStream;
import java.io.IOException;

public class SpecialCharactersActualText {
    private static final String FONT = System.getProperty("user.dir")
            + "/src/main/resources/fonts/iTextFreeSansWithE001Glyph.ttf";

    public static void main(String[] args) throws IOException {
        String dest = System.getProperty("user.dir") + "/src/main/resources/pdfua-glyph-actualtext.pdf";

        if (FileUtil.fileExists(FONT)) {
            System.out.println("Font file exists: " + FONT);
        } else {
            System.out.println("Font file does not exist: " + FONT);
        }

        WriterProperties wp = new WriterProperties()
                .addPdfUaXmpMetadata(PdfUAConformance.PDF_UA_1);
        PdfUADocument pdfDoc = new PdfUADocument(
                new PdfWriter(dest, wp),
                new PdfUAConfig(PdfUAConformance.PDF_UA_1, "Doc Title", "en-US"));
        PdfFont font = PdfFontFactory.createFont(FONT, PdfEncodings.IDENTITY_H, EmbeddingStrategy.FORCE_EMBEDDED);
        Document document = new Document(pdfDoc);
        document.setFont(font); 

        Text puaText = new Text("\uE001");
        puaText.getAccessibilityProperties().setActualText("beak symbol");
        Paragraph p = new Paragraph()
                .add(puaText);
        document.add(p);
        document.close();

    }


}
